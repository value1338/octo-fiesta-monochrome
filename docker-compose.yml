version: "3.8"

services:
  octo-fiesta:
    build: .
    image: octo-fiesta:latest
    container_name: octo-fiesta
    restart: unless-stopped
    ports:
      - "4534:4533"
    volumes:
      - /mnt/user/music:/music
      - /mnt/user/appdata/octo-fiesta/cache:/cache
      - /mnt/user/appdata/octo-fiesta/config:/config
    environment:
      # Navidrome/Subsonic (Docker: navidrome:4533, http://IP:4533)
      - Subsonic__Url=http://navidrome:4533

      - Subsonic__EnableExternalPlaylists=true
      - Subsonic__StorageMode=Permanent
      - Subsonic__DownloadMode=Track

      - SquidWTF__Quality=HI_RES_LOSSLESS

      - Library__DownloadPath=/music
      - Library__CachePath=/cache
